{"remainingRequest":"E:\\workspace\\code\\test\\my_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\code\\test\\my_project\\src\\views\\layout\\main-content.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\code\\test\\my_project\\src\\views\\layout\\main-content.vue","mtime":1562316221270},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { isURL } from '@/utils/validate'\nexport default {\n  inject: ['refresh'],\n  data () {\n    return {\n    }\n  },\n  computed: {\n    documentClientHeight: {\n      get () { return this.$store.state.common.documentClientHeight }\n    },\n    menuActiveName: {\n      get () { return this.$store.state.common.menuActiveName },\n      set (val) { this.$store.commit('common/updateMenuActiveName', val) }\n    },\n    mainTabs: {\n      get () { return this.$store.state.common.mainTabs },\n      set (val) { this.$store.commit('common/updateMainTabs', val) }\n    },\n    mainTabsActiveName: {\n      get () { return this.$store.state.common.mainTabsActiveName },\n      set (val) { this.$store.commit('common/updateMainTabsActiveName', val) }\n    },\n    siteContentViewHeight () {\n      var height = this.documentClientHeight - 50 - 30 - 2\n      if (this.$route.meta.isTab) {\n        height -= 40\n        return isURL(this.$route.meta.iframeUrl) ? { height: height + 'px' } : { minHeight: height + 'px' }\n      }\n      return { minHeight: height + 'px' }\n    }\n  },\n  methods: {\n    // tabs, 选中tab\n    selectedTabHandle (tab) {\n      tab = this.mainTabs.filter(item => item.name === tab.name)\n      if (tab.length >= 1) {\n        this.$router.push({ name: tab[0].name, query: tab[0].query, params: tab[0].params })\n      }\n    },\n    // tabs, 删除tab\n    removeTabHandle (tabName) {\n      this.mainTabs = this.mainTabs.filter(item => item.name !== tabName)\n      if (this.mainTabs.length >= 1) {\n        // 当前选中tab被删除\n        if (tabName === this.mainTabsActiveName) {\n          var tab = this.mainTabs[this.mainTabs.length - 1]\n          this.$router.push({ name: tab.name, query: tab.query, params: tab.params }, () => {\n            this.mainTabsActiveName = this.$route.name\n          })\n        }\n      } else {\n        this.menuActiveName = ''\n        this.$router.push({ name: 'home' })\n      }\n    },\n    // tabs, 关闭当前\n    tabsCloseCurrentHandle () {\n      this.removeTabHandle(this.mainTabsActiveName)\n    },\n    // tabs, 关闭其它\n    tabsCloseOtherHandle () {\n      this.mainTabs = this.mainTabs.filter(item => item.name === this.mainTabsActiveName)\n    },\n    // tabs, 关闭全部\n    tabsCloseAllHandle () {\n      this.mainTabs = []\n      this.menuActiveName = ''\n      this.$router.push({ name: 'home' })\n    },\n    // tabs, 刷新当前\n    tabsRefreshCurrentHandle () {\n      var tab = this.$route\n      this.removeTabHandle(tab.name)\n      this.$nextTick(() => {\n        this.$router.push({ name: tab.name, query: tab.query, params: tab.params })\n      })\n    }\n  }\n}\n",{"version":3,"sources":["main-content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main-content.vue","sourceRoot":"src/views/layout","sourcesContent":["<template>\r\n  <main class=\"site-content\" :class=\"{ 'site-content--tabs': $route.meta.isTab }\">\r\n    <!-- 主入口标签页 s -->\r\n    <el-tabs\r\n      v-if=\"$route.meta.isTab\"\r\n      v-model=\"mainTabsActiveName\"\r\n      :closable=\"true\"\r\n      @tab-click=\"selectedTabHandle\"\r\n      @tab-remove=\"removeTabHandle\">\r\n      <el-dropdown class=\"site-tabs__tools\" :show-timeout=\"0\">\r\n        <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n        <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"tabsCloseCurrentHandle\">关闭当前标签页</el-dropdown-item>\r\n          <el-dropdown-item @click.native=\"tabsCloseOtherHandle\">关闭其它标签页</el-dropdown-item>\r\n          <el-dropdown-item @click.native=\"tabsCloseAllHandle\">关闭全部标签页</el-dropdown-item>\r\n          <el-dropdown-item @click.native=\"refresh()\">刷新当前标签页</el-dropdown-item>\r\n        </el-dropdown-menu>\r\n      </el-dropdown>\r\n      <el-tab-pane\r\n        v-for=\"item in mainTabs\"\r\n        :key=\"item.name\"\r\n        :label=\"item.title\"\r\n        :name=\"item.name\">\r\n        <el-card :body-style=\"siteContentViewHeight\">\r\n          <iframe\r\n            v-if=\"item.type === 'iframe'\"\r\n            :src=\"item.iframeUrl\"\r\n            width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"yes\">\r\n          </iframe>\r\n          <keep-alive v-else>\r\n            <router-view v-if=\"item.name === mainTabsActiveName\" />\r\n          </keep-alive>\r\n        </el-card>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <!-- 主入口标签页 e -->\r\n    <el-card v-else :body-style=\"siteContentViewHeight\">\r\n      <keep-alive>\r\n        <router-view />\r\n      </keep-alive>\r\n    </el-card>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\n  import { isURL } from '@/utils/validate'\r\n  export default {\r\n    inject: ['refresh'],\r\n    data () {\r\n      return {\r\n      }\r\n    },\r\n    computed: {\r\n      documentClientHeight: {\r\n        get () { return this.$store.state.common.documentClientHeight }\r\n      },\r\n      menuActiveName: {\r\n        get () { return this.$store.state.common.menuActiveName },\r\n        set (val) { this.$store.commit('common/updateMenuActiveName', val) }\r\n      },\r\n      mainTabs: {\r\n        get () { return this.$store.state.common.mainTabs },\r\n        set (val) { this.$store.commit('common/updateMainTabs', val) }\r\n      },\r\n      mainTabsActiveName: {\r\n        get () { return this.$store.state.common.mainTabsActiveName },\r\n        set (val) { this.$store.commit('common/updateMainTabsActiveName', val) }\r\n      },\r\n      siteContentViewHeight () {\r\n        var height = this.documentClientHeight - 50 - 30 - 2\r\n        if (this.$route.meta.isTab) {\r\n          height -= 40\r\n          return isURL(this.$route.meta.iframeUrl) ? { height: height + 'px' } : { minHeight: height + 'px' }\r\n        }\r\n        return { minHeight: height + 'px' }\r\n      }\r\n    },\r\n    methods: {\r\n      // tabs, 选中tab\r\n      selectedTabHandle (tab) {\r\n        tab = this.mainTabs.filter(item => item.name === tab.name)\r\n        if (tab.length >= 1) {\r\n          this.$router.push({ name: tab[0].name, query: tab[0].query, params: tab[0].params })\r\n        }\r\n      },\r\n      // tabs, 删除tab\r\n      removeTabHandle (tabName) {\r\n        this.mainTabs = this.mainTabs.filter(item => item.name !== tabName)\r\n        if (this.mainTabs.length >= 1) {\r\n          // 当前选中tab被删除\r\n          if (tabName === this.mainTabsActiveName) {\r\n            var tab = this.mainTabs[this.mainTabs.length - 1]\r\n            this.$router.push({ name: tab.name, query: tab.query, params: tab.params }, () => {\r\n              this.mainTabsActiveName = this.$route.name\r\n            })\r\n          }\r\n        } else {\r\n          this.menuActiveName = ''\r\n          this.$router.push({ name: 'home' })\r\n        }\r\n      },\r\n      // tabs, 关闭当前\r\n      tabsCloseCurrentHandle () {\r\n        this.removeTabHandle(this.mainTabsActiveName)\r\n      },\r\n      // tabs, 关闭其它\r\n      tabsCloseOtherHandle () {\r\n        this.mainTabs = this.mainTabs.filter(item => item.name === this.mainTabsActiveName)\r\n      },\r\n      // tabs, 关闭全部\r\n      tabsCloseAllHandle () {\r\n        this.mainTabs = []\r\n        this.menuActiveName = ''\r\n        this.$router.push({ name: 'home' })\r\n      },\r\n      // tabs, 刷新当前\r\n      tabsRefreshCurrentHandle () {\r\n        var tab = this.$route\r\n        this.removeTabHandle(tab.name)\r\n        this.$nextTick(() => {\r\n          this.$router.push({ name: tab.name, query: tab.query, params: tab.params })\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n"]}]}