{"remainingRequest":"E:\\workspace\\code\\test\\my_project\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\code\\test\\my_project\\src\\utils\\httpRequest.js","dependencies":[{"path":"E:\\workspace\\code\\test\\my_project\\src\\utils\\httpRequest.js","mtime":1562472497064},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport axios from 'axios';\nimport router from '@/router';\nimport qs from 'qs';\nimport merge from 'lodash/merge';\nimport { clearLoginInfo } from '@/utils';\nimport loading from '@/utils/loading';\nvar http = axios.create({\n  timeout: 1000 * 30,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json; charset=utf-8'\n  }\n});\n/**\r\n * 请求拦截\r\n */\n\nhttp.interceptors.request.use(function (config) {\n  config.headers['token'] = Vue.cookie.get('token'); // 请求头带上token\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n/**\r\n * 响应拦截\r\n */\n\nhttp.interceptors.response.use(function (response) {\n  if (response.data && (response.data.code === 401 || response.data.code === 403)) {\n    // 401, token失效\n    clearLoginInfo();\n    router.push({\n      name: 'login'\n    });\n  }\n\n  return response;\n}, function (error) {\n  return Promise.reject(error);\n});\n/**\r\n * 请求地址处理\r\n * @param {*} actionName action方法名称\r\n */\n\nhttp.adornUrl = function (actionName) {\n  // 非生产环境 && 开启代理, 接口前缀统一使用[/proxyApi/]前缀做代理拦截!\n  console.log(\"111111111111111111111111:\" + process.env.VUE_APP_API_BASE_URL + actionName);\n  return process.env.VUE_APP_API_BASE_URL + actionName;\n};\n/**\r\n * get请求参数处理\r\n * @param {*} params 参数对象\r\n * @param {*} openDefultParams 是否开启默认参数?\r\n */\n\n\nhttp.adornParams = function () {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var openDefultParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var defaults = {// 't': new Date().getTime()\n  };\n  return openDefultParams ? merge(defaults, params) : params;\n};\n/**\r\n * post请求数据处理\r\n * @param {*} data 数据对象\r\n * @param {*} openDefultdata 是否开启默认数据?\r\n * @param {*} contentType 数据格式\r\n *  json: 'application/json; charset=utf-8'\r\n *  form: 'application/x-www-form-urlencoded; charset=utf-8'\r\n */\n\n\nhttp.adornData = function () {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var openDefultdata = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var contentType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'json';\n  var defaults = {\n    't': new Date().getTime()\n  };\n  data = openDefultdata ? merge(defaults, data) : data;\n  return contentType === 'json' ? JSON.stringify(data) : qs.stringify(data);\n};\n\nexport default http;",{"version":3,"sources":["E:\\workspace\\code\\test\\my_project\\src\\utils\\httpRequest.js"],"names":["Vue","axios","router","qs","merge","clearLoginInfo","loading","http","create","timeout","withCredentials","headers","interceptors","request","use","config","cookie","get","error","Promise","reject","response","data","code","push","name","adornUrl","actionName","console","log","process","env","VUE_APP_API_BASE_URL","adornParams","params","openDefultParams","defaults","adornData","openDefultdata","contentType","Date","getTime","JSON","stringify"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAE,OAAO,EADQ;AAExBC,EAAAA,eAAe,EAAE,IAFO;AAGxBC,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAHe,CAAb,CAAb;AAQA;;;;AAGAJ,IAAI,CAACK,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACJ,OAAP,CAAe,OAAf,IAA0BX,GAAG,CAACgB,MAAJ,CAAWC,GAAX,CAAe,OAAf,CAA1B,CADsC,CACY;;AAClD,SAAOF,MAAP;AACD,CAHD,EAGG,UAAAG,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CALD;AAOA;;;;AAGAX,IAAI,CAACK,YAAL,CAAkBS,QAAlB,CAA2BP,GAA3B,CAA+B,UAAAO,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACC,IAAT,KAAkBD,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,GAAvB,IAA8BF,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,GAAvE,CAAJ,EAAiF;AAAE;AACjFlB,IAAAA,cAAc;AACdH,IAAAA,MAAM,CAACsB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ;AACD;;AACD,SAAOJ,QAAP;AACD,CAND,EAMG,UAAAH,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CARD;AAUA;;;;;AAIAX,IAAI,CAACmB,QAAL,GAAgB,UAACC,UAAD,EAAgB;AAC9B;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,8BAA4BC,OAAO,CAACC,GAAR,CAAYC,oBAAxC,GAA+DL,UAA3E;AACA,SAAOG,OAAO,CAACC,GAAR,CAAYC,oBAAZ,GAAmCL,UAA1C;AACD,CAJD;AAMA;;;;;;;AAKApB,IAAI,CAAC0B,WAAL,GAAmB,YAA0C;AAAA,MAAzCC,MAAyC,uEAAhC,EAAgC;AAAA,MAA5BC,gBAA4B,uEAAT,IAAS;AAC3D,MAAIC,QAAQ,GAAG,CACb;AADa,GAAf;AAGA,SAAOD,gBAAgB,GAAG/B,KAAK,CAACgC,QAAD,EAAWF,MAAX,CAAR,GAA6BA,MAApD;AACD,CALD;AAOA;;;;;;;;;;AAQA3B,IAAI,CAAC8B,SAAL,GAAiB,YAA4D;AAAA,MAA3Df,IAA2D,uEAApD,EAAoD;AAAA,MAAhDgB,cAAgD,uEAA/B,IAA+B;AAAA,MAAzBC,WAAyB,uEAAX,MAAW;AAC3E,MAAIH,QAAQ,GAAG;AACb,SAAK,IAAII,IAAJ,GAAWC,OAAX;AADQ,GAAf;AAGAnB,EAAAA,IAAI,GAAGgB,cAAc,GAAGlC,KAAK,CAACgC,QAAD,EAAWd,IAAX,CAAR,GAA2BA,IAAhD;AACA,SAAOiB,WAAW,KAAK,MAAhB,GAAyBG,IAAI,CAACC,SAAL,CAAerB,IAAf,CAAzB,GAAgDnB,EAAE,CAACwC,SAAH,CAAarB,IAAb,CAAvD;AACD,CAND;;AAQA,eAAef,IAAf","sourcesContent":["import Vue from 'vue'\r\nimport axios from 'axios'\r\nimport router from '@/router'\r\nimport qs from 'qs'\r\nimport merge from 'lodash/merge'\r\nimport { clearLoginInfo } from '@/utils'\r\nimport loading from '@/utils/loading'\r\n\r\nconst http = axios.create({\r\n  timeout: 1000 * 30,\r\n  withCredentials: true,\r\n  headers: {\r\n    'Content-Type': 'application/json; charset=utf-8'\r\n  }\r\n})\r\n\r\n/**\r\n * 请求拦截\r\n */\r\nhttp.interceptors.request.use(config => {\r\n  config.headers['token'] = Vue.cookie.get('token') // 请求头带上token\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n/**\r\n * 响应拦截\r\n */\r\nhttp.interceptors.response.use(response => {\r\n  if (response.data && (response.data.code === 401 || response.data.code === 403)) { // 401, token失效\r\n    clearLoginInfo()\r\n    router.push({ name: 'login' })\r\n  }\r\n  return response\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n/**\r\n * 请求地址处理\r\n * @param {*} actionName action方法名称\r\n */\r\nhttp.adornUrl = (actionName) => {\r\n  // 非生产环境 && 开启代理, 接口前缀统一使用[/proxyApi/]前缀做代理拦截!\r\n  console.log(\"111111111111111111111111:\"+process.env.VUE_APP_API_BASE_URL + actionName);\r\n  return process.env.VUE_APP_API_BASE_URL + actionName\r\n}\r\n\r\n/**\r\n * get请求参数处理\r\n * @param {*} params 参数对象\r\n * @param {*} openDefultParams 是否开启默认参数?\r\n */\r\nhttp.adornParams = (params = {}, openDefultParams = true) => {\r\n  var defaults = {\r\n    // 't': new Date().getTime()\r\n  }\r\n  return openDefultParams ? merge(defaults, params) : params\r\n}\r\n\r\n/**\r\n * post请求数据处理\r\n * @param {*} data 数据对象\r\n * @param {*} openDefultdata 是否开启默认数据?\r\n * @param {*} contentType 数据格式\r\n *  json: 'application/json; charset=utf-8'\r\n *  form: 'application/x-www-form-urlencoded; charset=utf-8'\r\n */\r\nhttp.adornData = (data = {}, openDefultdata = true, contentType = 'json') => {\r\n  var defaults = {\r\n    't': new Date().getTime()\r\n  }\r\n  data = openDefultdata ? merge(defaults, data) : data\r\n  return contentType === 'json' ? JSON.stringify(data) : qs.stringify(data)\r\n}\r\n\r\nexport default http\r\n"]}]}