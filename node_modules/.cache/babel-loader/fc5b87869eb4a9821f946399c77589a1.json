{"remainingRequest":"E:\\workspace\\code\\test\\my_project\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\code\\test\\my_project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\code\\test\\my_project\\src\\views\\common\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\code\\test\\my_project\\src\\views\\common\\login.vue","mtime":1562844576819},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\code\\test\\my_project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getUUID } from \"@/utils\";\nimport { loginByUsername, getCaptcha as _getCaptcha } from \"@/api/login\"; // import store from '@/store/store'\n\nexport default {\n  data: function data() {\n    return {\n      dataForm: {\n        userName: \"admin\",\n        password: \"admin\",\n        uuid: \"\",\n        captcha: \"\"\n      },\n      dataRule: {\n        userName: [{\n          required: true,\n          message: \"帐号不能为空\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"密码不能为空\",\n          trigger: \"blur\"\n        }],\n        captcha: [{\n          required: true,\n          message: \"验证码不能为空\",\n          trigger: \"blur\"\n        }]\n      },\n      captchaPath: \"\"\n    };\n  },\n  created: function created() {\n    this.getCaptcha();\n  },\n  methods: {\n    // 提交表单\n    dataFormSubmit: function dataFormSubmit() {\n      var _this = this;\n\n      this.$refs[\"dataForm\"].validate(function (valid) {\n        if (valid) {\n          var data = {};\n          data.username = _this.dataForm.userName;\n          data.password = _this.dataForm.password;\n          data.uuid = _this.dataForm.uuid;\n          data.captcha = _this.dataForm.captcha;\n          loginByUsername(data).then(function (response) {\n            var data = response.data;\n\n            if (data && data.code === '200') {\n              _this.$store.commit('set_token', data.data.token);\n\n              _this.$store.commit('set_user', data.data);\n\n              _this.$router.replace({\n                name: \"home\"\n              });\n            } else {\n              _this.getCaptcha();\n\n              _this.$message.error(data.msg);\n\n              _this.dataForm.captcha = '';\n            }\n          });\n        }\n      });\n    },\n    // 获取验证码\n    getCaptcha: function getCaptcha() {\n      var _this2 = this;\n\n      this.dataForm.uuid = getUUID();\n\n      _getCaptcha(this.dataForm.uuid).then(function (response) {\n        if (response && response.data.code == 200) {\n          _this2.captchaPath = response.data.data;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,OAAA,QAAA,SAAA;AACA,SAAA,eAAA,EAAA,UAAA,IAAA,WAAA,QAAA,aAAA,C,CACA;;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AACA,QAAA,QAAA,EAAA,OADA;AAEA,QAAA,QAAA,EAAA,OAFA;AAGA,QAAA,IAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA;AAJA,OADA;AAOA,MAAA,QAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CADA;AAIA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,QAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAJA;AAOA,QAAA,OAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AAPA,OAPA;AAkBA,MAAA,WAAA,EAAA;AAlBA,KAAA;AAoBA,GAtBA;AAuBA,EAAA,OAvBA,qBAuBA;AACA,SAAA,UAAA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,cAFA,4BAEA;AAAA;;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,IAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,KAAA,CAAA,QAAA,CAAA,QAAA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,KAAA,CAAA,QAAA,CAAA,QAAA;AACA,UAAA,IAAA,CAAA,IAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,KAAA,CAAA,QAAA,CAAA,OAAA;AACA,UAAA,eAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,gBAAA,IAAA,GAAA,QAAA,CAAA,IAAA;;AACA,gBAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,KAAA,EAAA;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,IAAA,CAAA,IAAA,CAAA,KAAA;;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,UAAA,EAAA,IAAA,CAAA,IAAA;;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;AACA,aAJA,MAIA;AACA,cAAA,KAAA,CAAA,UAAA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,OAAA,GAAA,EAAA;AACA;AACA,WAXA;AAYA;AACA,OApBA;AAqBA,KAxBA;AAyBA;AACA,IAAA,UA1BA,wBA0BA;AAAA;;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,OAAA,EAAA;;AACA,MAAA,WAAA,CAAA,KAAA,QAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,IAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OAJA;AAKA;AAjCA;AA1BA,CAAA","sourcesContent":["<template>\r\n  <div class=\"site-wrapper site-page--login\">\r\n    <div class=\"site-content__wrapper\">\r\n      <div class=\"site-content\">\r\n        <div class=\"brand-info\">\r\n          <h2 class=\"brand-info__text\">exchange_code</h2>\r\n          <p class=\"brand-info__intro\">兑换码管理系统基于vue、element-ui构建开发，实现后台管理前端功能。</p>\r\n        </div>\r\n        <div class=\"login-main\">\r\n          <h3 class=\"login-title\">管理员登录</h3>\r\n          <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmit()\" status-icon>\r\n            <el-form-item prop=\"userName\">\r\n              <el-input v-model=\"dataForm.userName\" placeholder=\"帐号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <el-input v-model=\"dataForm.password\" type=\"password\" placeholder=\"密码\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"captcha\">\r\n              <el-row :gutter=\"20\">\r\n                <el-col :span=\"14\">\r\n                  <el-input v-model=\"dataForm.captcha\" placeholder=\"验证码\">\r\n                  </el-input>\r\n                </el-col>\r\n                <el-col :span=\"10\" class=\"login-captcha\">\r\n                  <!-- <img :src=\"captchaPath\" @click=\"getCaptcha()\" alt=\"\"> -->\r\n                  <div style=\"position: absolute;width: 100%;height: 100%;\"  @click=\"getCaptcha()\"></div>\r\n                  <div style=\"background: #999;\">\r\n                      <span style=\"letter-spacing: 6px;color: #fff;line-height: 34px;font-size: 20px;text-align: center;display:block\">{{captchaPath}}</span>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button class=\"login-btn-submit\" type=\"primary\" @click=\"dataFormSubmit()\">登录</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUUID } from \"@/utils\";\r\nimport { loginByUsername,getCaptcha } from \"@/api/login\";\r\n// import store from '@/store/store'\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataForm: {\r\n        userName: \"admin\",\r\n        password: \"admin\",\r\n        uuid: \"\",\r\n        captcha: \"\"\r\n      },\r\n      dataRule: {\r\n        userName: [\r\n          { required: true, message: \"帐号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        password: [\r\n          { required: true, message: \"密码不能为空\", trigger: \"blur\" }\r\n        ],\r\n        captcha: [\r\n          { required: true, message: \"验证码不能为空\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      captchaPath: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    this.getCaptcha()\r\n  },\r\n  methods: {\r\n    // 提交表单\r\n    dataFormSubmit() {\r\n      this.$refs[\"dataForm\"].validate(valid => {\r\n        if (valid) {\r\n          let data = {};\r\n          data.username = this.dataForm.userName;\r\n          data.password = this.dataForm.password;\r\n          data.uuid = this.dataForm.uuid;\r\n          data.captcha = this.dataForm.captcha;\r\n          loginByUsername(data).then(response => {\r\n            let data = response.data;\r\n            if (data && data.code === '200') {\r\n              this.$store.commit('set_token', data.data.token);\r\n              this.$store.commit('set_user', data.data);\r\n              this.$router.replace({ name: \"home\" });\r\n            } else {\r\n              this.getCaptcha();\r\n              this.$message.error(data.msg);\r\n              this.dataForm.captcha = '';\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // 获取验证码\r\n    getCaptcha() {\r\n      this.dataForm.uuid = getUUID();\r\n      getCaptcha(this.dataForm.uuid).then(response =>{\r\n        if(response && response.data.code == 200){\r\n          this.captchaPath = response.data.data;\r\n        }\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.site-wrapper.site-page--login {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background-color: rgba(38, 50, 56, 0.6);\r\n  overflow: hidden;\r\n  &:before {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: -1;\r\n    width: 100%;\r\n    height: 100%;\r\n    content: \"\";\r\n    background-image: url(~@/assets/img/login_bg.jpg);\r\n    background-size: cover;\r\n  }\r\n  .site-content__wrapper {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    padding: 0;\r\n    margin: 0;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n    background-color: transparent;\r\n  }\r\n  .site-content {\r\n    min-height: 100%;\r\n    padding: 30px 500px 30px 30px;\r\n  }\r\n  .brand-info {\r\n    margin: 220px 100px 0 90px;\r\n    color: #fff;\r\n  }\r\n  .brand-info__text {\r\n    margin: 0 0 22px 0;\r\n    font-size: 48px;\r\n    font-weight: 400;\r\n    text-transform: uppercase;\r\n  }\r\n  .brand-info__intro {\r\n    margin: 10px 0;\r\n    font-size: 16px;\r\n    line-height: 1.58;\r\n    opacity: 0.6;\r\n  }\r\n  .login-main {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    padding: 150px 60px 180px;\r\n    width: 470px;\r\n    min-height: 100%;\r\n    background-color: #fff;\r\n  }\r\n  .login-title {\r\n    font-size: 16px;\r\n  }\r\n  .login-captcha {\r\n    overflow: hidden;\r\n    > img {\r\n      width: 100%;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  .login-btn-submit {\r\n    width: 100%;\r\n    margin-top: 38px;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/common"}]}